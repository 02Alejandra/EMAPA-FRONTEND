<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menú de Consultas</title>
    <link rel="stylesheet" type="text/css" href="style.css">



</head>

<body>
    <div class="wrapper">
        <nav>
            <ul>
                <li><a href="#" onclick="mostrarFormulario('validaUsuario')">VALIDAR USUARIO</a></li>
                <li><a href="#" onclick="mostrarFormulario('datosUsuario')">Datos del Usuario</a></li>
                <li><a href="#" onclick="mostrarFormulario('consultaCliente')">Consulta del Cliente</a></li>
                <li><a href="#" onclick="mostrarFormulario('consultaFacturasCliente')">FACTURAS DEL CLIENTE</a></li>
                <li><a href="#" onclick="mostrarFormulario('consultaFacturasClienteDataset')">FACTURAS DEL CLIENTE -
                        DATASET</a></li>
                <li><a href="#" onclick="mostrarFormulario('consultaDetalleFacturasCliente')">FACTURAS DEL CLIENTE
                        DETALLE</a>
                </li>
                <li><a href="#" onclick="mostrarFormulario('procesoFacturacion')">Proceso de Facturación Int-</a></li>
                <li><a href="#" onclick="mostrarFormulario('procesoFacturacionSeleccion')">Proceso de Facturación
                        Selección</a></li>
                <li><a href="#" onclick="mostrarFormulario('consultaFacturasProcesadas')">Consulta de Facturas
                        Procesadas</a></li>
                <li><a href="#" onclick="mostrarFormulario('consultaFacturaProcesada')">CONSULTA DE FACTURA
                        PROCESADA</a>
                </li>
                <li><a href="#" onclick="mostrarFormulario('reversoTransacciones')">Reverso de Transacciones Int</a>
                </li>
                <li><a href="#" onclick="mostrarFormulario('reporteTransaccionesRV')">Reporte de Transacciones RV</a>
                </li>
                <li><a href="#" onclick="mostrarFormulario('reimpresionComprobante')">Reimpresión del Comprobante</a>
                </li>
                <li><a href="#" onclick="mostrarFormulario('registrarFormaPago')">FORMA DE PAGO</a></li>
                <li><a href="#" onclick="mostrarFormulario('consultaUsuarioFacturacion')">USUARIO DE FACTURACIÓN-</a>
                </li>
                <li><a href="#" onclick="mostrarFormulario('obtenerFacturasCliente')">Facturas del Cliente Fac_Num</a>
                </li>
                <li><a href="#" onclick="mostrarFormulario('insertarUsuarioAutorizado')">Insertar el Usuario
                        Autorizado</a>
                </li>
                <li><a href="#" onclick="mostrarFormulario('obtenerUsuarioAutorizado')">USUARIO AUTORIZADO</a></li>
                <li><a href="#" onclick="mostrarFormulario('consultaFacturasAutorizadas')">FACTURAS DEL CLIENTE
                        AUTORIZADAS</a></li>
            </ul>
        </nav>

        <!-- Ventana flotante para mostrar resultados -->
        <div id="resultadoVentana" class="ventana-flotante">
            <span class="cerrar" onclick="cerrarVentana()">X</span>
            <div id="resultadoContenido"></div>
        </div>

        <!-- CONSULTA 1 -->
        <div id="validaUsuario" class="hidden formulario">
            <!-- Formulario e interfaz para validar usuario -->
            <h2>Validar Usuario</h2>
            <form>
                <label for="usuarioValidar">Usuario:</label>
                <input type="text" id="usuarioValidar" name="usuarioValidar" required>
                <br>
                <label for="contrasenaValidar">Contraseña:</label>
                <input type="password" id="contrasenaValidar" name="contrasenaValidar" required>
                <br>
                <button type="button" onclick="validaUsuario()">Validar Usuario</button>
            </form>
        </div>

        <!-- CONSULTA 2 -->
        <div id="datosUsuario" class="hidden formulario">
            <!-- Formulario e interfaz para obtener datos del usuario -->
            <h2>Datos del Usuario</h2>
            <form>
                <label for="nombreUsuario">Nombre de Usuario:</label>
                <input type="text" id="nombreUsuario" name="nombreUsuario" required>
                <br>
                <label for="edadUsuario">Edad:</label>
                <input type="number" id="edadUsuario" name="edadUsuario" required>
                <br>
                <button type="button" onclick="obtenerDatosUsuario()">Obtener Datos del Usuario</button>
            </form>
        </div>

        <!--CONSULTA 3-->
        <div id="consultaCliente" class="hidden formulario">
            <!-- Formulario e interfaz para la consulta de cliente -->
            <h2>Consulta de Cliente</h2>
            <form>
                <label for="tipoBusqueda">Tipo de Búsqueda:</label>
                <input type="text" id="tipoBusqueda" name="tipoBusqueda" required>

                <br>

                <label for="parametroBusqueda">Parámetro de Búsqueda:</label>
                <input type="text" id="parametroBusqueda" name="parametroBusqueda" required>

                <br>

                <button type="button" onclick="consultaCliente()">Consultar Cliente</button>
            </form>
        </div>

        <!--CONSULTA 4-->
        <div id="consultaFacturasCliente" class="hidden formulario">
            <!-- Formulario e interfaz para la consulta de facturas del cliente -->
            <h2>Consulta de Facturas del Cliente</h2>
            <form>
                <label for="cueIdFacturas">Cuenta de Cliente (cueId):</label>
                <input type="text" id="cueIdFacturas" name="cueIdFacturas" required>
                <br>
                <button type="button" onclick="consultaFacturasCliente()">Consultar Facturas del Cliente</button>
            </form>
        </div>

        <!--CONSULTA 5-->
        <div id="consultaFacturasClienteDataset" class="hidden formulario">
            <!-- Formulario e interfaz para la consulta de facturas del cliente (Dataset) -->
            <h2>Consulta de Facturas del Cliente (Dataset)</h2>
            <form>
                <label for="cueIdFacturasDataset">Cuenta de Cliente (cueId):</label>
                <input type="text" id="cueIdFacturasDataset" name="cueIdFacturasDataset" required>
                <br>
                <button type="button" onclick="consultaFacturasClienteDataset()">Consultar Facturas del Cliente
                    (Dataset)</button>
            </form>
        </div>

        <!--CONSULTA 6-->
        <div id="consultaDetalleFacturasCliente" class="hidden formulario">
            <!-- Formulario e interfaz para la consulta detallada de facturas del cliente -->
            <h2>Consulta Detallada de Facturas del Cliente</h2>
            <form>
                <label for="cueIdDetalleFacturas">Cuenta de Cliente (cueId):</label>
                <input type="text" id="cueIdDetalleFacturas" name="cueIdDetalleFacturas" required>
                <br>
                <button type="button" onclick="consultaDetalleFacturasCliente()">Consultar Detalle de Facturas del
                    Cliente</button>
            </form>
        </div>


        <!--CONSULTA 7-->
        <div id="procesoFacturacion" class="hidden formulario">
            <!-- Formulario e interfaz para el proceso de facturación interna -->
            <h2>Proceso de Facturación Interna</h2>
            <form>
                <label for="fechaProcesoFacturacion">Fecha de Proceso:</label>
                <input type="date" id="fechaProcesoFacturacion" name="fechaProcesoFacturacion" required>
                <br>
                <button type="button" onclick="procesoFacturacion()">Iniciar Proceso de Facturación Interna</button>
            </form>
        </div>

        <!--CONSULTA 8-->
        <div id="procesoFacturacionSeleccion" class="hidden formulario">
            <!-- Formulario e interfaz para la selección del proceso de facturación -->
            <h2>Selección de Proceso de Facturación</h2>
            <form>
                <label for="idProcesoFacturacion">ID del Proceso de Facturación:</label>
                <input type="text" id="idProcesoFacturacion" name="idProcesoFacturacion" required>
                <br>
                <button type="button" onclick="procesoFacturacionSeleccion()">Seleccionar Proceso de
                    Facturación</button>
            </form>
        </div>

        <!--CONSULTA 9-->
        <div id="consultaFacturasProcesadas" class="hidden formulario">
            <!-- Formulario e interfaz para la consulta de facturas procesadas -->
            <h2>Consulta de Facturas Procesadas</h2>
            <form>
                <label for="fechaConsultaFacturasProcesadas">Fecha de Consulta:</label>
                <input type="text" id="fechaConsultaFacturasProcesadas" name="fechaConsultaFacturasProcesadas" required>
                <br>
                <button type="button" onclick="consultaFacturasProcesadas()">Consultar Facturas Procesadas</button>
            </form>
        </div>

        <!--CONSULTA 10-->
        <div id="consultaFacturaProcesada" class="hidden formulario">
            <!-- Formulario e interfaz para la consulta de factura procesada -->
            <h2>Consulta de Factura Procesada</h2>
            <form>
                <label for="idFacturaProcesada">ID de Factura Procesada:</label>
                <input type="text" id="idFacturaProcesada" name="idFacturaProcesada" required>
                <br>
                <button type="button" onclick="consultaFacturaProcesada()">Consultar Factura Procesada</button>
            </form>
        </div>

        <!--CONSULTA 11-->
        <div id="reversoTransacciones" class="hidden formulario">
            <!-- Formulario e interfaz para el reverso de transacciones internas -->
            <h2>Reverso de Transacciones Internas</h2>
            <form>
                <label for="idTransaccionReverso">ID de Transacción a Reversar:</label>
                <input type="text" id="idTransaccionReverso" name="idTransaccionReverso" required>
                <br>
                <button type="button" onclick="reversoTransacciones()">Realizar Reverso de Transacciones
                    Internas</button>
            </form>
        </div>

        <!--CONSULTA 12-->
        <div id="reporteTransaccionesRV" class="hidden formulario">
            <!-- Formulario e interfaz para el reporte de transacciones para RV -->
            <h2>Reporte de Transacciones para RV</h2>
            <form>
                <label for="fechaReporteRV">Fecha del Reporte:</label>
                <input type="date" id="fechaReporteRV" name="fechaReporteRV" required>
                <br>
                <button type="button" onclick="reporteTransaccionesRV()">Generar Reporte de Transacciones para
                    RV</button>
            </form>
        </div>

        <!--CONSULTA 13-->
        <div id="reimpresionComprobante" class="hidden formulario">
            <!-- Formulario e interfaz para la reimpresión de comprobantes -->
            <h2>Reimpresión del Comprobante</h2>
            <form>
                <label for="idComprobanteReimpresion">ID del Comprobante a Reimprimir:</label>
                <input type="text" id="idComprobanteReimpresion" name="idComprobanteReimpresion" required>
                <br>
                <button type="button" onclick="reimpresionComprobante()">Reimprimir Comprobante</button>
            </form>
        </div>

        <!--CONSULTA 14-->
        <div id="registrarFormaPago" class="hidden formulario">
            <!-- Formulario e interfaz para registrar forma de pago -->
            <h2>Registrar Forma de Pago</h2>
            <form>
                <label for="nombreFormaPago">Nombre de la Forma de Pago:</label>
                <input type="text" id="tipoFormaPago" name="tipoFormaPago" required>
                <br>
                <button type="button" onclick="registrarFormaPago()">Registrar Forma de Pago</button>
            </form>
        </div>

        <!--CONSULTA 15-->
        <!-- Agrega este formulario en tu HTML -->
        <div id="consultaUsuarioFacturacion" class="hidden formulario">
            <h2>Consulta de Usuario de Facturación</h2>
            <form>
                <label for="usuarioFacturacion">Nombre de Usuario:</label>
                <input type="text" id="usuarioFacturacion" name="usuarioFacturacion" required>
                <br>
                <button type="button" onclick="consultarUsuarioFacturacion()">Consultar Usuario de Facturación</button>
            </form>
        </div>


        <!--CONSULTA 16-->
        <div id="obtenerFacturasCliente" class="hidden formulario">
            <!-- Formulario e interfaz para obtener facturas del cliente por número de factura -->
            <h2>Obtener Facturas del Cliente por Número de Factura</h2>
            <form>
                <label for="numeroFactura">Número de Factura:</label>
                <input type="text" id="numeroFactura" name="numeroFactura" required>
                <br>
                <button type="button" onclick="obtenerFacturasCliente()">Obtener Facturas del Cliente por Número de
                    Factura</button>
            </form>
        </div>

        <!--CONSULTA 17-->
        <div id="insertarUsuarioAutorizado" class="hidden formulario">
            <!-- Formulario e interfaz para insertar usuario autorizado -->
            <h2>Insertar Usuario Autorizado</h2>
            <form>
                <label for="nombreUsuarioAutorizado">Nombre de Usuario Autorizado:</label>
                <input type="text" id="nombreUsuarioAutorizado" name="nombreUsuarioAutorizado" required>
                <br>
                <button type="button" onclick="insertarUsuarioAutorizado()">Insertar Usuario Autorizado</button>
            </form>
        </div>

        <!--CONSULTA 18-->
        <div id="obtenerUsuarioAutorizado" class="hidden formulario">
            <!-- Formulario e interfaz para obtener usuario autorizado -->
            <h2>Obtener Usuario Autorizado</h2>
            <form>
                <!-- No hay parámetros en este caso -->
                <button type="button" onclick="obtenerUsuarioAutorizado()">Obtener Usuario Autorizado</button>
            </form>
        </div>

        <!--CONSULTA 19-->
        <!-- Agrega este formulario en tu HTML -->
        <div id="consultaFacturasAutorizadas" class="hidden formulario">
            <h2>Consulta de Facturas Autorizadas</h2>
            <form>
                <label for="recaudador">Recaudador:</label>
                <input type="text" id="recaudador" name="recaudador" required>
                <br>
                <label for="cueId">ID de Cuenta:</label>
                <input type="number" id="cueId" name="cueId" required>
                <br>
                <button type="button" onclick="consultarFacturasAutorizadas()">Consultar Facturas Autorizadas</button>
            </form>
        </div>


        <script src="./script.js"></script>
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

        <script>

            function mostrarFormulario(formularioId) {
                document.querySelectorAll('.formulario').forEach(function (formulario) {
                    formulario.classList.add('hidden');
                });
                document.getElementById(formularioId).classList.remove('hidden');
            }

            function cerrarVentana() {
                var ventana = document.getElementById('resultadoVentana');
                ventana.style.display = 'none';
            }

            function mostrarResultadosConsulta(datos) {
                var ventana = document.getElementById('resultadoVentana');
                var contenido = document.getElementById('resultadoContenido');

                var htmlResultado = "<h3>Resultados de la Consulta</h3>";
                htmlResultado += "<p>CUE_ID (Suministro): " + datos.cueId + "</p>";
                htmlResultado += "<p>Interés: " + datos.interes + "</p>";
                htmlResultado += "<p>VALOR (Deuda): " + datos.valorDeuda + "</p>";
                htmlResultado += "<p>Nro. de cartas por pagar: " + datos.numCartasPagar + "</p>";

                contenido.innerHTML = htmlResultado;
                ventana.style.display = 'block';
            }

            //CONSULTA 1
            function validaUsuario() {
                var usuario = document.getElementById('usuarioValidar').value;
                var contrasena = document.getElementById('contrasenaValidar').value;
                console.log('Usuario validado:', usuario);
            }
            //CONSULTA 2
            function obtenerDatosUsuario() {
                var nombreUsuario = document.getElementById('nombreUsuario').value;
                console.log('Obteniendo datos del usuario:', nombreUsuario);
            }
            //CONSULTA 3
            function consultaCliente() {
                const tipoBusqueda = document.getElementById('tipoBusqueda').value;
                const parametroBusqueda = document.getElementById('parametroBusqueda').value;
                realizarConsultaCliente(tipoBusqueda, parametroBusqueda);
            }

            //CONSULTA 4
            async function realizarConsultaFacturas(cueId) {
                console.log("Esto es la función realizarConsultaFacturas");
                const url = "http://127.0.0.1:3000/api/principal.asmx";

                const soapEnvelope = `
  <soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <SP_WS_FACTURAS_CLIENTE xmlns="http://tempuri.org/">
      <LN_CUE_ID>${cueId}</LN_CUE_ID>
    </SP_WS_FACTURAS_CLIENTE>
  </soap:Body>
</soap:Envelope>
  `;

                try {
                    const response = await fetch(url, {
                        method: "POST",
                        headers: {
                            "Content-Type": "text/xml;charset=utf-8",
                            "SOAPAction": "http://tempuri.org/SP_WS_FACTURAS_CLIENTE"
                        },
                        body: soapEnvelope,
                    });

                    console.log("Esto es un response:", response);
                    if (!response.ok) {
                        console.log("Esto es un error");
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    console.log("Esto es esta bien");
                    const text = await response.text();
                    console.log("Esto es una respuesta:", text);


                    const parser = new DOMParser();
                    const xmlDoc = parser.parseFromString(text, "text/xml");

                    const tables = xmlDoc.getElementsByTagName("Table");

                    if (tables.length > 0) {
                        for (let i = 0; i < tables.length; i++) {
                            const table = tables[i];
                            const fsrId = table.getElementsByTagName("FSR_ID")[0].textContent;
                            const fsrNumeroCompleto = table.getElementsByTagName("FSR_NUMERO_COMPLETO")[0].textContent;
                            console.log(`FSR_ID: ${fsrId}, FSR_NUMERO_COMPLETO: ${fsrNumeroCompleto}`);
                            //colocar los demas uwu
                        }
                    } else {
                        console.log("No se encontraron datos en la tabla.");
                    }


                } catch (error) {
                    console.error("Error en la consulta de facturas del cliente:", error);
                }
            }

            function consultaFacturasCliente() {
                const cueId = document.getElementById('cueIdFacturas').value;
                console.log('Consultando facturas del cliente:', cueId);
                realizarConsultaFacturas(cueId);
            }




            //CONSULTA 5
            async function realizarConsultaFacturasClienteDataset(cueId) {
                console.log("Esto es la función realizarConsultaFacturas");
                const url = "http://127.0.0.1:3000/api/principal.asmx";

                const soapEnvelope = `
  <soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <SP_WS_FACTURAS_CLIENTE xmlns="http://tempuri.org/">
      <LN_CUE_ID>${cueId}</LN_CUE_ID>
    </SP_WS_FACTURAS_CLIENTE>
  </soap:Body>
</soap:Envelope>
  `;

                try {
                    const response = await fetch(url, {
                        method: "POST",
                        headers: {
                            "Content-Type": "text/xml;charset=utf-8",
                            "SOAPAction": "http://tempuri.org/SP_WS_FACTURAS_CLIENTE"
                        },
                        body: soapEnvelope,
                    });

                    console.log("Esto es un response:", response);
                    if (!response.ok) {
                        console.log("Esto es un error");
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    console.log("Esto es esta bien");
                    const text = await response.text();
                    console.log("Esto es una respuesta:", text);


                    const parser = new DOMParser();
                    const xmlDoc = parser.parseFromString(text, "text/xml");

                    const tables = xmlDoc.getElementsByTagName("Table");

                    if (tables.length > 0) {
                        for (let i = 0; i < tables.length; i++) {
                            const table = tables[i];
                            const fsrId = table.getElementsByTagName("FSR_ID")[0].textContent;
                            const fsrNumeroCompleto = table.getElementsByTagName("FSR_NUMERO_COMPLETO")[0].textContent;
                            console.log(`FSR_ID: ${fsrId}, FSR_NUMERO_COMPLETO: ${fsrNumeroCompleto}`);
                            //colocar los demas uwu
                        }
                    } else {
                        console.log("No se encontraron datos en la tabla.");
                    }


                } catch (error) {
                    console.error("Error en la consulta de facturas del cliente:", error);
                }
            }


            function consultaFacturasClienteDataset() {
                const cueId = document.getElementById('cueIdFacturasDataset').value;
                console.log('Consultando facturas Dataset del cliente:', cueId);
                realizarConsultaFacturas(cueId);
            }

            //CONSULTA 6

            async function realizarConsultaDetalleFacturas(cueId) {
                console.log("Esto es la función realizarConsultaDetalleFacturas");
                const url = "http://127.0.0.1:3000/api/principal.asmx";

                const soapEnvelope = `
  <soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <SP_WS_FACTURAS_CLIENTE xmlns="http://tempuri.org/">
      <LN_CUE_ID>${cueId}</LN_CUE_ID>
    </SP_WS_FACTURAS_CLIENTE>
  </soap:Body>
</soap:Envelope>
  `;

                try {
                    const response = await fetch(url, {
                        method: "POST",
                        headers: {
                            "Content-Type": "text/xml;charset=utf-8",
                            "SOAPAction": "http://tempuri.org/SP_WS_FACTURAS_CLIENTE"
                        },
                        body: soapEnvelope,
                    });

                    console.log("Esto es un response:", response);
                    if (!response.ok) {
                        console.log("Esto es un error");
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    console.log("Esto es esta bien");
                    const text = await response.text();
                    console.log("Esto es una respuesta:", text);


                    const parser = new DOMParser();
                    const xmlDoc = parser.parseFromString(text, "text/xml");

                    const tables = xmlDoc.getElementsByTagName("Table");

                    if (tables.length > 0) {
                        for (let i = 0; i < tables.length; i++) {
                            const table = tables[i];
                            const fsrId = table.getElementsByTagName("FSR_ID")[0].textContent;
                            const fsrNumeroCompleto = table.getElementsByTagName("FSR_NUMERO_COMPLETO")[0].textContent;
                            console.log(`FSR_ID: ${fsrId}, FSR_NUMERO_COMPLETO: ${fsrNumeroCompleto}`);
                            //colocar los demas uwu
                        }
                    } else {
                        console.log("No se encontraron datos en la tabla.");
                    }


                } catch (error) {
                    console.error("Error en la consulta del detalle de facturas del cliente:", error);
                }
            }

            function consultaDetalleFacturasCliente() {
                const cueId = document.getElementById('cueIdDetalleFacturas').value;
                console.log('Consultando detalle de facturas del cliente:', cueId);
                realizarConsultaDetalleFacturas(cueId);
            }


            //CONSULTA 7
            function realizarProcesoFacturacion() {
                const cueId = document.getElementById('cueId').value;
                const recaudador = document.getElementById('recaudador').value;
                const formaPago = document.getElementById('formaPago').value;
                const banco = document.getElementById('banco').value;
                const cuenta = document.getElementById('cuenta').value;
                const numeroCheque = document.getElementById('numeroCheque').value;
                const beneficiario = document.getElementById('beneficiario').value;
                const observacion = document.getElementById('observacion').value;
                procesoFacturacion(cueId, recaudador, formaPago, banco, cuenta, numeroCheque, beneficiario, observacion);
            }

            //CONSULTA 8
            function procesoFacturacionSeleccion() {
                const cueId = document.getElementById('cueIdSeleccion').value;
                const recaudador = document.getElementById('recaudadorSeleccion').value;
                const numFacturas = document.getElementById('numFacturas').value;
                const parametro = document.getElementById('parametro').value;
                realizarProcesoFacturacionSeleccion(cueId, recaudador, numFacturas, parametro);
            }

            //CONSULTA 9
            function realizarConsultaFacturasProcesadas() {
                const freId = document.getElementById('freId').value;
                consultaFacturasProcesadas(freId);
            }

            //CONSULTA 10
            async function consultaFactura(fsrId) {
                const url = "http://127.0.0.1:3000/api/principal.asmx";

                const soapEnvelope = `
          <soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
            <soap:Body>
              <SP_WS_CONSULTA_FACTURA_PROCESADA xmlns="http://tempuri.org/">
                <LI_FSR_ID>${fsrId}</LI_FSR_ID>
              </SP_WS_CONSULTA_FACTURA_PROCESADA>
            </soap:Body>
          </soap:Envelope>
        `;

                try {
                    const response = await fetch(url, {
                        method: "POST",
                        headers: {
                            "Content-Type": "text/xml;charset=utf-8",
                            "SOAPAction": "http://tempuri.org/SP_WS_CONSULTA_FACTURA_PROCESADA"
                        },
                        body: soapEnvelope,
                    });
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const text = await response.text();
                    const parser = new DOMParser();
                    const xmlDoc = parser.parseFromString(text, "text/xml");

                    const tables = Array.from(xmlDoc.getElementsByTagName("Table"));

                    if (tables.length > 0) {
                        tables.forEach(table => {
                            const fsrId = table.getElementsByTagName("FSR_ID")[0].textContent;
                            const cueId = table.getElementsByTagName("CUE_ID")[0].textContent;
                            const cleCiRuc = table.getElementsByTagName("CLE_CI_RUC")[0].textContent;

                            console.log(`FSR_ID: ${fsrId}, CUE_ID: ${cueId}, CLE_CI_RUC: ${cleCiRuc}`);
                            // Agregar más campos según sea necesario
                        });
                    } else {
                        console.log("No se encontraron datos en la tabla.");
                    }

                } catch (error) {
                    console.error("Error en la consulta de factura procesada:", error);
                }
            }

            function consultaFacturaProcesada() {
                const fsrId = document.getElementById('idFacturaProcesada').value;
                console.log('Consultando factura procesada:', fsrId);
                consultaFactura(fsrId);
            }



            //CONSULTA 11
            function realizarReversoTransacciones() {
                // Obtener los valores de los campos de entrada
                const freId = document.getElementById('freId').value;
                const recaudador = document.getElementById('recaudador').value;

                // Llamar a la función de reversoTransacciones con los valores proporcionados
                reversoTransacciones(freId, recaudador);
            }

            //CONSULTA 12
            function reversoTransacciones() {
                const freId = document.getElementById('freId').value;
                const recaudador = document.getElementById('recaudador').value;
                realizarReversoTransacciones(freId, recaudador);
            }

            //CONSULTA 13
            function reporteTransaccionesRV() {
                const recaudador = document.getElementById('recaudadorRV').value;
                const fechaDesde = document.getElementById('fechaDesdeRV').value;
                const fechaHasta = document.getElementById('fechaHastaRV').value;
                const filtro = document.getElementById('filtroRV').value;
                generarReporteTransacciones(recaudador, fechaDesde, fechaHasta, filtro);
            }

            //CONSULTA 14
            async function registrarFormaPago() {
                // Obtén el elemento con el id tipoFormaPago
                const tipoFormaPagoInput = document.getElementById('tipoFormaPago');

                // Verifica si el elemento existe
                if (!tipoFormaPagoInput) {
                    console.error("Error: No se encontró el elemento con id tipoFormaPago.");
                    return;
                }

                // Obtén el valor del campo tipoFormaPago y conviértelo a un número entero
                const tipoFormaPago = parseInt(tipoFormaPagoInput.value);

                if (isNaN(tipoFormaPago)) {
                    // Manejar el caso en el que el valor no sea un número
                    console.error("Error: tipoFormaPago debe ser un número entero.");
                    return;
                }

                const url = "http://127.0.0.1:3000/api/principal.asmx";

                const soapEnvelope = `
        <soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
            <soap:Body>
                <SP_WS_FORMA_PAGO xmlns="http://tempuri.org/">
                    <LI_TIPO_F_PAGO>${tipoFormaPago}</LI_TIPO_F_PAGO>
                </SP_WS_FORMA_PAGO>
            </soap:Body>
        </soap:Envelope>
    `;

                try {
                    const response = await fetch(url, {
                        method: "POST",
                        headers: {
                            "Content-Type": "text/xml;charset=utf-8",
                            "SOAPAction": "http://tempuri.org/SP_WS_FORMA_PAGO",
                        },
                        body: soapEnvelope,
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}, response: ${await response.text()}`);
                    }

                    const text = await response.text();
                    console.log("Respuesta completa del servidor:", text);

                    const parser = new DOMParser();
                    const xmlDoc = parser.parseFromString(text, "text/xml");

                    const tables = Array.from(xmlDoc.getElementsByTagName("Table"));

                    if (tables.length > 0) {
                        tables.forEach(table => {
                            const tipoFormaPago = table.querySelector("PRM_ID").textContent;
                            const descripcion = table.querySelector("PRM_DESCRIPCION").textContent;
                            console.log(`Tipo de Forma de Pago: ${tipoFormaPago}, Descripción: ${descripcion}`);
                            // Agregar lógica para mostrar otros datos si es necesario
                        });
                    } else {
                        console.log("No se encontraron datos en la tabla.");
                    }
                } catch (error) {
                    console.error("Error en la consulta de forma de pago:", error);
                }
            }


            // Llamada a la función con un ejemplo de tipo de forma de pago
            function consultaFormaPago() {
                const tipoFormaPago = document.getElementById('tipoFormaPago').value;
                console.log('Consultando forma de pago:', tipoFormaPago);
                registrarFormaPago(tipoFormaPago);
            }




            //CONSULTA 15
            async function consultarUsuarioFacturacion() {
                const url = "http://127.0.0.1:3000/api/principal.asmx";  // Ajusta la URL según tu entorno

                // Obtener el valor del campo de entrada
                const usuario = document.getElementById('usuarioFacturacion').value;

                const soapEnvelope = `
        <soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
            <soap:Body>
                <SP_WS_USUARIO_FACTURACION xmlns="http://tempuri.org/">
                    <LS_USR_USER>${usuario}</LS_USR_USER>
                </SP_WS_USUARIO_FACTURACION>
            </soap:Body>
        </soap:Envelope>
    `;

                try {
                    const response = await fetch(url, {
                        method: "POST",
                        headers: {
                            "Content-Type": "text/xml;charset=utf-8",
                            "SOAPAction": "http://tempuri.org/SP_WS_USUARIO_FACTURACION"
                        },
                        body: soapEnvelope,
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const text = await response.text();
                    procesarRespuestaUsuarioFacturacion(text);

                } catch (error) {
                    console.error("Error en la consulta de usuario de facturación:", error);
                }
            }

            function procesarRespuestaUsuarioFacturacion(xmlResponse) {
                const parser = new DOMParser();
                const xmlDoc = parser.parseFromString(xmlResponse, "text/xml");

                const resultNode = xmlDoc.querySelector("SP_WS_USUARIO_FACTURACIONResult");

                if (resultNode) {
                    const resultado = resultNode.textContent;
                    console.log("Resultado de la consulta de usuario de facturación:", resultado);
                    // Puedes realizar acciones adicionales según sea necesario
                } else {
                    console.log("No se encontró el nodo de resultado en la respuesta.");
                }
            }

            function realizarAsignacionOpcionMenu() {
                // Obtener los valores de los campos de entrada
                const lsUsrUser = document.getElementById('lsUsrUser').value;

                // Llamar a la función asignarOpcionMenu con los valores proporcionados
                asignarOpcionMenu(lsUsrUser);
            }

            //CONSULTA 16
            function realizarObtencionFacturasCliente() {
                const lnCueId = document.getElementById('lnCueId').value;
                const lsFacRecaudador = document.getElementById('lsFacRecaudador').value;
                const lnFsrId = document.getElementById('lnFsrId').value;
                obtenerFacturasCliente(lnCueId, lsFacRecaudador, lnFsrId);
            }

            //CONSULTA 17
            function realizarAsignacion() {
                const lsUsrAutoriza = document.getElementById('lsUsrAutoriza').value;
                const lsUsrAutorizado = document.getElementById('lsUsrAutorizado').value;
                const lfCueId = document.getElementById('lfCueId').value;
                const lsFsrId = document.getElementById('lsFsrId').value;
                const lfTotal = document.getElementById('lfTotal').value;
                const liFiltro = document.getElementById('liFiltro').value;
                asignarOpcionMenu(lsUsrAutoriza, lsUsrAutorizado, lfCueId, lsFsrId, lfTotal, liFiltro);
            }

            //CONSULTA 18
            function mostrarResultado(resultado) {
                console.log("Resultado:", resultado);
                // Puedes agregar lógica adicional para mostrar el resultado en tu página HTML
            }

            async function obtenerUsuarioAutorizado() {
                console.log("Obteniendo Usuario Autorizado");

                const url = "http://127.0.0.1:3000/api/principal.asmx";

                const soapEnvelope = `
        <soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
            <soap:Body>
                <SP_WS_USUARIO_AUTORIZADO xmlns="http://tempuri.org/" />
            </soap:Body>
        </soap:Envelope>
    `;

                try {
                    const response = await fetch(url, {
                        method: "POST",
                        headers: {
                            "Content-Type": "text/xml;charset=utf-8",
                            "SOAPAction": "http://tempuri.org/SP_WS_USUARIO_AUTORIZADO"
                        },
                        body: soapEnvelope,
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const text = await response.text();

                    const parser = new DOMParser();
                    const xmlDoc = parser.parseFromString(text, "text/xml");

                    const usuarios = Array.from(xmlDoc.getElementsByTagName("USR_USER")).map(usuario => usuario.textContent);

                    if (usuarios.length > 0) {
                        console.log("Usuarios Autorizados:", usuarios);
                    } else {
                        console.log("No se encontraron usuarios autorizados.");
                    }
                } catch (error) {
                    console.error("Error al obtener información de usuario autorizado:", error);
                }
            }

            //CONSULTA 19
            async function consultarFacturasAutorizadas() {
                const url = "http://127.0.0.1:3000/api/principal.asmx";  // Ajusta la URL según tu entorno

                // Obtener los valores de los campos de entrada
                const recaudador = document.getElementById('recaudador').value;
                const cueId = document.getElementById('cueId').value;

                const soapEnvelope = `
        <soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
            <soap:Body>
                <SP_WS_FACTURAS_CLIENTE_AUTORIZADAS xmlns="http://tempuri.org/">
                    <LS_FAC_RECAUDADOR>${recaudador}</LS_FAC_RECAUDADOR>
                    <LN_CUE_ID>${cueId}</LN_CUE_ID>
                </SP_WS_FACTURAS_CLIENTE_AUTORIZADAS>
            </soap:Body>
        </soap:Envelope>
    `;

                try {
                    const response = await fetch(url, {
                        method: "POST",
                        headers: {
                            "Content-Type": "text/xml;charset=utf-8",
                            "SOAPAction": "http://tempuri.org/SP_WS_FACTURAS_CLIENTE_AUTORIZADAS"
                        },
                        body: soapEnvelope,
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const text = await response.text();
                    procesarRespuestaFacturasAutorizadas(text);

                } catch (error) {
                    console.error("Error en la consulta de facturas autorizadas:", error);
                }
            }

            function procesarRespuestaFacturasAutorizadas(xmlResponse) {
                const parser = new DOMParser();
                const xmlDoc = parser.parseFromString(xmlResponse, "text/xml");

                const resultNode = xmlDoc.querySelector("SP_WS_FACTURAS_CLIENTE_AUTORIZADASResult");

                if (resultNode) {
                    // Puedes procesar y mostrar los datos de la respuesta según tus necesidades
                    const tables = Array.from(resultNode.getElementsByTagName("Table"));

                    if (tables.length > 0) {
                        tables.forEach(table => {
                            const id = table.getElementsByTagName("ID")[0].textContent;
                            const usuarioAutorizado = table.getElementsByTagName("FAC_USUARIO_AUTORIZADO")[0].textContent;
                            const cueId = table.getElementsByTagName("FAC_CUE_ID")[0].textContent;
                            const fsrId = table.getElementsByTagName("FAC_FSR_ID")[0].textContent;

                            console.log(`ID: ${id}, Usuario Autorizado: ${usuarioAutorizado}, Cuenta ID: ${cueId}, FSR ID: ${fsrId}`);
                            // Agrega más campos según sea necesario
                        });
                    } else {
                        console.log("No se encontraron datos en la tabla.");
                    }
                } else {
                    console.log("No se encontró el nodo de resultado en la respuesta.");
                }
            }

        </script>

</body>

</html>